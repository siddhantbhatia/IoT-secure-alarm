<html>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <head>
    <title>FIT3140 PANIC</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <script>
    var socket = io();
    function activateAlarm() {
      socket.emit("rt-sound-alarm");
      reset();
    }
    function lockRegisters() {
      socket.emit("rt-lock-register");
      reset();
    }
    function decline() {
      socket.emit("rt-decline");
      reset();
    }

    function reset() {
      document.getElementById("emergency-table").style.color = "black";
      document.getElementById("robbery").style.color = "black";
      document.getElementById("fire").style.color = "black";
      document.getElementById("medical").style.color = "black";
      document.getElementById("false").style.color = "black";
    }
  </script>

  <body>
    <div class="header"><h1>Emergency Response System</h1></div>

    <table>
      <tr class="table_heading" id="emergency-table">
        <th>Emergency Type</th>
      </tr>

      <tr class="table_text">
        <td id="robbery">Robbery</td>
      </tr>

      <tr class="table_text">
        <td id="medical">Medical Emergency</td>
      </tr>

      <tr class="table_text">
        <td id="fire">Fire</td>
      </tr>

      <tr class="table_text">
        <td id="false">False Alarm</td>
      </tr>

      <tr>
        <th>Emergency Type</th>
      </tr>
    </table>

    <div class="flex">
      <button id="alarm" onclick="activateAlarm()" class="button button1">
        Sound Alarms
      </button>
      <button id="lock" onclick="lockRegisters()" class="button button2">
        Lock Registers
      </button>
      <button id="decline" onclick="decline()" class="button button3">
        Decline
      </button>
    </div>
    <script>
      var socket = io();
      var emergencyTextBox = document.getElementById("emergency-msg-text");
      socket.on("gt-button-click", function(msg) {
        console.log(msg);
        switch (msg) {
          case "1":
            console.log("11");
            document.getElementById("robbery").style.color = "red";
            break;
          case "2":
            console.log("22");
            document.getElementById("fire").style.color = "red";
            break;
          case "3":
            console.log("33");
            document.getElementById("medical").style.color = "red";
            break;
          case "10":
            console.log("10-10");
            document.getElementById("false").style.color = "red";
            break;
          default:
            console.log("default");
            break;
        }
      });
    </script>
  </body>
</html>
